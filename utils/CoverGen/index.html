<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#667eea">
    <link rel="icon" type="image/png" sizes="64x64" href="favicon.png">
    <title>专辑封面生成器 - CoverGen</title>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <div class="theme-toggle">
        <input type="checkbox" id="themeToggle" class="theme-toggle__checkbox">
        <label for="themeToggle" class="theme-toggle__btn">
            <span class="theme-toggle__feature"></span>
        </label>
    </div>

    <div id="background-wrapper"></div>
    <div class="page-container">
        <div class="nav-bar">
            <a href="../../index.html" class="back-link" id="mainHomeLink">← 返回首页</a>
            <button id="backToHomeBtn" class="back-link" style="display: none; background:none; border:none; cursor:pointer;">← 返回选择风格</button>
        </div>

        <div class="header">
            <h1 data-shadow='黑胶封面生成器'>黑胶封面生成器</h1>
            <p class="subtitle" id="mainSubtitle">请选择您喜欢的专辑封面风格</p>
        </div>

        <div class="container">
            <div id="landing-page" class="landing-grid cover-grid">
                
                <div class="album-showcase" onclick="selectStyle('im_ok', 'I\'m OK - 陶喆', './assets/cover/I\'m OK.png')">
                    <div class="album-card">
                        <div class="vinyl-record">
                            <div class="vinyl-label" style="background-image: url('./assets/cover/I\'m OK.png');"></div>
                        </div>
                        <div class="album-cover" style="background-image: url('./assets/cover/I\'m OK.png');"></div>
                    </div>
                    <h3>I'm OK</h3>
                    <p>波普波点式人像</p>
                </div>

                <div class="album-showcase" onclick="selectStyle('baima', '白马村游记 - 彩虹合唱团', './assets/cover/白马村游记.png')">
                    <div class="album-card">
                        <div class="vinyl-record">
                            <div class="vinyl-label" style="background-image: url('./assets/cover/白马村游记.png');"></div>
                        </div>
                        <div class="album-cover" style="background-image: url('./assets/cover/白马村游记.png');"></div>
                    </div>
                    <h3>白马村游记</h3>
                    <p>水墨书法粗体排版</p>
                </div>

                <div class="album-showcase" onclick="selectStyle('dt_blue', '陶喆 - 陶喆', './assets/cover/陶喆.jpg')">
                    <div class="album-card">
                        <div class="vinyl-record">
                            <div class="vinyl-label" style="background-image: url('./assets/cover/陶喆.jpg');"></div>
                        </div>
                        <div class="album-cover" style="background-image: url('./assets/cover/陶喆.jpg');"></div>
                    </div>
                    <h3>陶喆</h3>
                    <p>克莱因蓝剪影拼贴</p>
                </div>

            </div>

            <div id="tool-interface" style="display: none; padding: 2rem;">
                <div class="selected-style-preview">
                    <img id="currentStyleImg" src="" alt="Selected Style">
                    <div>
                        <h2 id="currentStyleName">风格名称</h2>
                        <p class="text-muted">基于此风格为您生成专属封面</p>
                    </div>
                </div>

                <div class="section" id="imOkSettings" style="display: none;">
                    <h2>配置您的封面参数</h2>
                    
                    <div class="input-group" style="margin-bottom: 15px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">1. 上传您的人物/主体照片 (自动处理为半调网点)：</label>
                        <input type="file" id="userImage" accept="image/*" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px dashed var(--accent-highlight); border-radius: 8px; color: #fff;">
                        
                        <div id="imagePreviewContainer" style="display: none; margin-top: 15px;">
                            <div id="imagePreviewBox" style="width: 100%; max-width: 400px; aspect-ratio: 1/1; background: #FFE000; position: relative; overflow: hidden; border-radius: 8px; margin: 0 auto; cursor: grab; touch-action: none; box-shadow: inset 0 0 10px rgba(0,0,0,0.1);">
                                <img id="dragImg" style="position: absolute; transform-origin: top left; opacity: 0.65; filter: grayscale(100%); pointer-events: none;" />
                                
                                <div id="previewTitle" style="position: absolute; bottom: 31%; left: 45%; max-width: 50%; overflow: hidden; pointer-events: none; color: rgba(204, 0, 0, 0.4); font-size: 3rem; font-style: italic; font-weight: bold; font-family: 'BrushScriptMT', cursive; white-space: nowrap;">I'm ok</div>
                                <div id="previewSubtitle" style="position: absolute; bottom: 25%; left: 55%; max-width: 40%; overflow: hidden; pointer-events: none; color: rgba(0, 0, 0, 0.4); font-size: 1rem; font-weight: 900; letter-spacing: 1px; white-space: nowrap;">DAVID TAO 陶喆</div>
                                
                                <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; pointer-events: none;">拖动调整位置，滑块调整大小</div>
                            </div>
                            
                            <div style="margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 15px;">
                                <span style="color: var(--text-muted); font-size: 0.9rem;">缩小</span>
                                <input type="range" id="zoomSlider" min="0.2" max="3" step="0.05" value="1" style="width: 200px; accent-color: var(--accent-highlight);">
                                <span style="color: var(--text-muted); font-size: 0.9rem;">放大</span>
                            </div>
                        </div>
                    </div>

                    <div class="input-group" style="margin-bottom: 15px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">2. 主标题 (红色手写风)：</label>
                        <input type="text" id="titleInput" value="I'm ok" placeholder="例如：I'm fine" style="width: 100%; padding: 12px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; font-size: 1rem;">
                    </div>

                    <div class="input-group" style="margin-bottom: 25px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">3. 副标题 (黑色无衬线)：</label>
                        <input type="text" id="subtitleInput" value="DAVID TAO 陶喆" placeholder="例如：YOUR NAME 你的名字" style="width: 100%; padding: 12px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; font-size: 1rem;">
                    </div>
                    
                    <div class="input-group" style="margin-bottom: 25px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">4. 网点大小 (Dot Period)：</label>
                        <div style="display: flex; align-items: center; justify-content: space-between; gap: 15px; background: var(--input-bg); padding: 12px; border-radius: 8px; border: 1px solid var(--input-border);">
                            <span style="color: var(--text-muted); font-size: 0.9rem;">细腻</span>
                            <input type="range" id="dotPeriodSlider" min="2" max="15" step="1" value="6" style="flex: 1; accent-color: var(--accent-highlight);">
                            <span style="color: var(--text-muted); font-size: 0.9rem;">粗犷</span>
                            <span id="dotPeriodValue" style="color: var(--accent-highlight); font-weight: bold; width: 25px; text-align: right;">6</span>
                        </div>
                    </div>

                    <div class="input-group" style="margin-bottom: 25px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">5. 颜色深浅 (Darkness)：</label>
                        <div style="display: flex; align-items: center; justify-content: space-between; gap: 15px; background: var(--input-bg); padding: 12px; border-radius: 8px; border: 1px solid var(--input-border);">
                            <span style="color: var(--text-muted); font-size: 0.9rem;">较浅</span>
                            <input type="range" id="imOkDarknessSlider" min="0.5" max="2.0" step="0.1" value="1.0" style="flex: 1; accent-color: var(--accent-highlight);">
                            <span style="color: var(--text-muted); font-size: 0.9rem;">较深</span>
                            <span id="imOkDarknessValue" style="color: var(--accent-highlight); font-weight: bold; width: 35px; text-align: right;">1.0</span>
                        </div>
                    </div>

                    <button id="generateBtn" class="btn btn-primary" style="width: 100%;">开始生成专属封面</button>
                </div>
                
                <div class="section" id="baimaSettings" style="display: none;">
                    <h2>配置您的封面参数</h2>
                    
                    <div class="input-group" style="margin-bottom: 15px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">简繁体排版参考 (点击黄字复制)：</label>
                        <div id="tradReferenceBox" style="padding: 10px; background: rgba(0,0,0,0.2); border-radius: 6px; border: 1px dashed var(--glass-border); color: var(--text-primary); font-size: 0.95rem; min-height: 44px; display: flex; align-items: center; flex-wrap: wrap; gap: 8px;">
                            <span style="color: var(--text-muted); font-size: 0.85rem;">输入文本后，这里会提示对应的繁体字...</span>
                        </div>
                    </div>

                    <div class="input-group" style="margin-bottom: 10px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">1. 主标题 (竖排，按回车键分列)：</label>
                        <textarea id="baimaTitleInput" rows="2" style="width: 100%; padding: 12px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; font-size: 1.2rem;">白马村&#10;游记</textarea>
                    </div>
                    <div id="baimaTitleControls" style="margin-bottom: 20px;"></div>

                    <div class="input-group" style="margin-bottom: 10px;">
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">2. 副标题 (落款，按回车键分列)：</label>
                        <textarea id="baimaSubtitleInput" rows="2" style="width: 100%; padding: 12px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; font-size: 1rem;">上海彩虹&#10;室内合唱团</textarea>
                    </div>
                    <div id="baimaSubControls" style="margin-bottom: 25px;"></div>

                    <div id="baimaPreviewContainer" style="margin-bottom: 25px;">
                        <div id="baimaPreviewBox" style="width: 100%; max-width: 400px; aspect-ratio: 1/1; background: #F2EFE8; position: relative; overflow: hidden; border-radius: 8px; margin: 0 auto; box-shadow: inset 0 0 10px rgba(0,0,0,0.1); touch-action: none;">
                            <div id="baimaDragArea" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>
                            <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; pointer-events: none; z-index: 10;">拖动每列文字，上方滑块调间距与大小</div>
                        </div>
                    </div>

                    <button id="generateBtnBaima" class="btn btn-primary" style="width: 100%;">生成水墨封面</button>
                </div>

                <div class="section" id="dtBlueSettings" style="display: none;">
                    <h2 style="margin-bottom: 20px; border-bottom: 1px solid var(--input-border); padding-bottom: 10px;">配置您的封面参数</h2>
                    
                    <div style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="font-size: 1rem; color: var(--accent-highlight); margin-bottom: 15px;">① 图像与底图</h3>
                        <label class="text-muted" style="display: block; margin-bottom: 8px;">上传主体照片 (自动处理为高反差剪影)：</label>
                        <input type="file" id="dtBlueImage" accept="image/*" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px dashed var(--accent-highlight); border-radius: 8px; color: #fff; margin-bottom: 15px;">
                        
                        <div class="input-group" style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span class="text-muted">剪影暗度阈值</span>
                                <span id="dtBlueThresholdVal" style="color: var(--text-muted); font-size: 0.8rem;">128</span>
                            </div>
                            <input type="range" id="dtBlueThreshold" min="50" max="250" value="128" style="width: 100%; accent-color: var(--accent-highlight);" oninput="document.getElementById('dtBlueThresholdVal').innerText = this.value">
                        </div>

                        <div id="dtBlueImagePreviewContainer" style="display: none; margin-top: 15px;">
                            <div id="dtBluePreviewBox" style="width: 100%; max-width: 400px; aspect-ratio: 1/1; background: url('./assets/img/bg.png') center/cover no-repeat; background-color: #1650A2; position: relative; overflow: hidden; border-radius: 8px; margin: 0 auto; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); touch-action: none;">
                                <img id="dtBlueDragImg" style="position: absolute; transform-origin: top left; filter: contrast(1000%) grayscale(100%); mix-blend-mode: multiply; opacity: 0.8; cursor: grab;" />
                                <div id="dtBlueDragArea" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none;"></div>
                                <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.5); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; pointer-events: none; z-index: 10;">直接在画面上拖动图片或文字</div>
                            </div>
                            <div style="margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 15px;">
                                <span style="color: var(--text-muted); font-size: 0.9rem;">缩小图片</span>
                                <input type="range" id="dtBlueZoom" min="0.2" max="3" step="0.05" value="1" style="width: 200px; accent-color: var(--accent-highlight);">
                                <span style="color: var(--text-muted); font-size: 0.9rem;">放大图片</span>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <h3 style="font-size: 1rem; color: var(--accent-highlight); margin-bottom: 15px;">② 核心排版 (可拖拽调整)</h3>
                        
                        <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px dashed rgba(255,255,255,0.1);">
                            <label class="text-muted" style="display: block; margin-bottom: 8px;">顶部符号</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="text" id="dtBlueSymbol" value="!" style="width: 80px; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; text-align: center; font-size: 1.2rem;">
                                <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 0.8rem; color: var(--text-muted); white-space: nowrap;">字号</span>
                                    <input type="range" id="dtBlueSymbolSize" min="50" max="300" step="5" value="120" style="width: 100%; accent-color: var(--accent-highlight);">
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px dashed rgba(255,255,255,0.1);">
                            <label class="text-muted" style="display: block; margin-bottom: 8px;">英文标题</label>
                            <input type="text" id="dtBlueEnTitle" value="David Tao" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; margin-bottom: 10px;">
                            <div style="display: flex; gap: 15px; align-items: center;">
                                <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 0.8rem; color: var(--text-muted); white-space: nowrap;">字号</span>
                                    <input type="range" id="dtBlueEnSize" min="30" max="200" step="5" value="85" style="width: 100%; accent-color: var(--accent-highlight);">
                                </div>
                                <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 0.8rem; color: var(--text-muted); white-space: nowrap;">字距</span>
                                    <input type="range" id="dtBlueEnSpacing" min="-10" max="50" step="1" value="0" style="width: 100%; accent-color: var(--accent-highlight);">
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="text-muted" style="display: block; margin-bottom: 8px;">中文标题</label>
                            <input type="text" id="dtBlueZhTitle" value="陶喆" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff; margin-bottom: 10px;">
                            <div style="display: flex; gap: 15px; align-items: center;">
                                <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 0.8rem; color: var(--text-muted); white-space: nowrap;">字号</span>
                                    <input type="range" id="dtBlueZhSize" min="50" max="300" step="5" value="120" style="width: 100%; accent-color: var(--accent-highlight);">
                                </div>
                                <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 0.8rem; color: var(--text-muted); white-space: nowrap;">字距</span>
                                    <input type="range" id="dtBlueZhSpacing" min="-10" max="100" step="1" value="10" style="width: 100%; accent-color: var(--accent-highlight);">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 8px; margin-bottom: 25px;">
                        <h3 style="font-size: 1rem; color: var(--accent-highlight); margin-bottom: 15px;">③ 背景小字 (低分辨率模糊效果)</h3>
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <span style="font-size: 0.8rem; color: var(--text-muted); white-space: nowrap;">小字统一字号</span>
                            <input type="range" id="dtBlueSSize" min="12" max="60" step="1" value="26" style="flex: 1; accent-color: var(--accent-highlight);">
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <input type="text" id="dtBlueS1" value="R&B / SOUL / 1997" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff;">
                            <input type="text" id="dtBlueS2" value="SHOCK RECORDS" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff;">
                            <input type="text" id="dtBlueS3" value="PRODUCED BY DAVID TAO" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff;">
                            <input type="text" id="dtBlueS4" value="ALL RIGHTS RESERVED" style="width: 100%; padding: 10px; background: var(--input-bg); border: 1px solid var(--input-border); border-radius: 8px; color: #fff;">
                        </div>
                    </div>

                    <button id="generateBtnDTBlue" class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 1.1rem;">生成封面</button>
                </div>

                <div class="section" id="resultSection" style="display: none;">
                    <h2>生成结果</h2>
                    <div id="loadingIndicator" style="display: none; text-align: center; padding: 20px;">
                        <div class="spinner"></div>
                        <p>正在生成中，请稍候...</p>
                    </div>
                    <div id="resultPreview" style="display: none; text-align: center;">
                        <div class="album-card result-card" style="margin: 0 auto; margin-bottom: 20px;">
                            <div class="vinyl-record slide-out"></div>
                            <img id="generatedImg" class="album-cover" src="" alt="Generated Cover">
                        </div>
                        <button id="downloadBtn" class="btn btn-success">下载高清封面</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>Copyright © 2024 Tooltopia. All Rights Reserved.</p>
        <p>Designed by DSTBP</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/cnchar/cnchar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cnchar-trad/cnchar.trad.min.js"></script>
    <script src="./assets/js/theme-toggle.js"></script>
    <script src="./assets/js/script.js"></script>
</body>
</html>