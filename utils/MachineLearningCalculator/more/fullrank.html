<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <link rel="icon" type="image/png" sizes="64x64" href="../favicon.png">
    <title>矩阵满秩分解 - MachineLearningCalculator</title>
    <!-- KaTeX for Math Rendering (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .matrix-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px) saturate(1.2);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 25px;
            margin-bottom: 20px;
        }

        .matrix-panel p {
            color: hsl(0 0% 85%);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .matrix-panel label {
            display: block;
            color: hsl(0 0% 90%);
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .matrix-input {
            width: 100%;
            min-height: 140px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: hsl(0 0% 95%);
            transition: all 0.3s;
            resize: vertical;
        }

        .matrix-input::placeholder {
            color: hsl(0 0% 60%);
        }

        .matrix-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(0, 0, 0, 0.4);
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .result-section {
            margin-top: 25px;
        }

        .result-section h3 {
            color: hsl(0 0% 95%);
            font-size: 1.2rem;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .result-output {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: auto;
            color: hsl(0 0% 90%);
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            min-height: 60px;
            margin-bottom: 20px;
        }

        .navigation-links {
            display: flex;
            gap: 15px;
            margin-bottom: 1rem;
        }

        .navigation-links a {
            color: hsl(0 0% 85%);
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 1rem;
        }

        .navigation-links a:hover {
            color: hsl(0 0% 100%);
        }

        @media screen and (max-width: 768px) {
            .button-group {
                flex-direction: column;
            }
        }

        /* 日间模式样式 */
        body.day-mode .matrix-panel {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 5px 3px 30px rgba(0, 0, 0, 0.1);
        }

        body.day-mode .matrix-panel p {
            color: #4a5568;
        }

        body.day-mode .matrix-panel label {
            color: #2d3748;
        }

        body.day-mode .matrix-input {
            background: rgba(255, 255, 255, 0.7);
            color: #1a202c;
            border-color: rgba(0, 0, 0, 0.15);
        }

        body.day-mode .matrix-input::placeholder {
            color: #718096;
        }

        body.day-mode .matrix-input:focus {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.25);
        }

        body.day-mode .result-section h3 {
            color: #2d3748;
        }

        body.day-mode .result-output {
            background: rgba(255, 255, 255, 0.7);
            color: #1a202c;
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.day-mode .navigation-links a {
            color: #4a5568;
        }

        body.day-mode .navigation-links a:hover {
            color: #1a202c;
        }
    </style>
</head>
<body>
<script>
    // 在 body 内容渲染前立即执行，避免闪烁
    if (localStorage.getItem('tooltopia-theme') === 'day') {
        document.body.classList.add('day-mode');
    }
</script>
    <!-- 日夜切换器 -->
    <div class="theme-toggle">
        <input type="checkbox" id="themeToggle" class="theme-toggle__checkbox">
        <label for="themeToggle" class="theme-toggle__btn">
            <span class="theme-toggle__feature"></span>
        </label>
    </div>

    <div id="background-wrapper"></div>
    <div class="page-container">
        <div class="navigation-links">
            <a href="../more.html">← 返回更多</a>
            <span style="color: hsl(0 0% 60%)">|</span>
            <a href="../index.html">返回计算器</a>
        </div>
        <div class="header">
            <h1 data-shadow='矩阵满秩分解'>矩阵满秩分解</h1>
            <p class="subtitle">将矩阵分解为 A = F · G 的形式</p>
        </div>

        <div class="container">
            <div class="matrix-panel">
                <p>输入矩阵 \(A\)，每行一行，元素用空格或逗号分隔。点击"分解"将在下方显示 \(F\) 与 \(G\)。</p>
                <div>
                    <label>矩阵 A：</label>
                    <textarea id="matrixA" class="matrix-input">2 4 1 1
1 2 -1 2
-1 -2 -2 1</textarea>
                </div>
                <div class="button-group">
                    <button id="decomp" class="btn btn-primary">分解</button>
                    <button id="sample" class="btn btn-secondary">载入示例</button>
                </div>

                <div class="result-section">
                    <h3>结果 \(F\)：</h3>
                    <pre id="outF" class="result-output">-</pre>
                    <h3>结果 \(G\)：</h3>
                    <pre id="outG" class="result-output">-</pre>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <p>Copyright © 2024 DSTBP. All Rights Reserved.</p>
                <p>Designed by <a href="https://github.com/DSTBP" target="_blank">DSTBP</a></p>
    </footer>

    <script>
        window.MathJax = {
            tex: { inlineMath: [['$','$'], ['\\(','\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script>
        (function(){
            function tryRender(){
                try{
                    if (window.renderMathInElement) {
                        renderMathInElement(document.body, {
                            delimiters:[{left:'$$',right:'$$',display:true},{left:'\\[',right:'\\]',display:true},{left:'\\(',right:'\\)',display:false}],
                            throwOnError:false
                        });
                        return;
                    }
                } catch(e){ console.warn('KaTeX render failed', e); }
                if (window.MathJax && MathJax.typesetPromise) MathJax.typesetPromise();
            }
            if (document.readyState==='complete' || document.readyState==='interactive') tryRender(); else document.addEventListener('DOMContentLoaded', tryRender);
        })();
    </script>
    <script src="../assets/js/matrix-utils.js"></script>
    <script src="../assets/js/fullrank.js"></script>
    <script src="../assets/js/theme-toggle.js"></script>
</body>
</html>
