<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>单纯形法求解 - MachineLearningCalculator</title>
    <!-- KaTeX for Math Rendering (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        body { background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; min-height:100vh; margin:0; padding:0 }
        .container { max-width:1200px;margin:32px auto;padding:20px }
        .panel { background: rgba(255,255,255,0.97); color:#111; padding:24px;border-radius:16px;box-shadow: 0 8px 32px rgba(0,0,0,0.1); margin-bottom:20px }
        textarea { width:100%; min-height:80px; font-family: monospace; font-size:14px; padding:10px; border:2px solid #e5e7eb; border-radius:8px; transition: border-color 0.2s }
        textarea:focus { outline:none; border-color:#667eea }
        .input-group { margin-bottom:12px }
        label { font-weight:600; display:block; margin-bottom:4px; color:#374151 }
        .small-text { font-size:0.9rem; color:#6b7280; margin-top:4px }

        .btn-calc {
            padding: 11px 22px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        .btn-calc:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn-calc:active {
            transform: translateY(0);
        }

        #solve {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        #solve:hover {
            filter: brightness(1.1);
        }

        #loadExample {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            padding: 9px 20px;
        }

        #loadExample:hover {
            background: #f0f4ff;
            border-color: #5568d3;
            color: #5568d3;
        }

        .step-section {
            background: #f8fafc;
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 16px;
            border-left: 4px solid #667eea;
        }

        .step-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 12px
        }

        .tableau {
            overflow-x: auto;
            margin: 12px 0;
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .tableau table {
            border-collapse: collapse;
            margin: 0 auto;
            font-size: 14px;
        }

        .tableau th, .tableau td {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            text-align: center;
            min-width: 60px;
        }

        .tableau th {
            background: #f3f4f6;
            font-weight: 600;
            color: #374151;
        }

        .pivot-cell {
            background: #fef3c7 !important;
            font-weight: 700;
            color: #92400e;
        }

        .pivot-row {
            background: #fef9e7 !important
        }

        .pivot-col {
            background: #fef9e7 !important
        }

        .result-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 16px;
            border-radius: 10px;
            border: 2px solid #667eea;
            margin-top: 12px;
        }

        .result-box strong {
            color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            cursor: pointer;
        }

        .radio-group input[type="radio"] {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <h1 style="color:white">单纯形法求解线性规划</h1>
            <div>
                <a href="../more.html" style="color:white;text-decoration:underline;margin-right:12px">返回更多</a>
                <a href="../index.html" style="color:white;text-decoration:underline">返回计算器</a>
            </div>
        </div>

        <div class="panel">
            <p style="color:#6b7280; margin-bottom:16px">
                输入线性规划问题，使用单纯形法求解。本工具将展示完整的求解步骤，包括引入松弛变量、构建初始单纯形表、每次迭代的详细过程。
            </p>

            <div class="input-group">
                <label>问题类型：</label>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="problemType" value="min" checked> 最小化 (min)
                    </label>
                    <label>
                        <input type="radio" name="problemType" value="max"> 最大化 (max)
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label>目标函数系数（空格或逗号分隔）：</label>
                <textarea id="objective" placeholder="例如：-4 -6 -18 表示 min -4x₁ - 6x₂ - 18x₃">-4 -6 -18</textarea>
                <div class="small-text">输入目标函数 z = c₁x₁ + c₂x₂ + ... 的系数 c₁, c₂, ...</div>
            </div>

            <div class="input-group">
                <label>约束条件左侧系数矩阵 A（每行一个约束，元素空格或逗号分隔）：</label>
                <textarea id="constraints" placeholder="例如：\n1 0 3\n1 2 0">1 0 3
1 2 0</textarea>
                <div class="small-text">每行对应一个约束条件的系数</div>
            </div>

            <div class="input-group">
                <label>约束条件右侧常数 b（空格或逗号分隔）：</label>
                <textarea id="rhs" placeholder="例如：3 3">3 3</textarea>
                <div class="small-text">每个约束条件的右侧常数（需要 ≥ 0）</div>
            </div>

            <div class="input-group">
                <label>约束类型（每个约束一个符号，空格分隔）：</label>
                <textarea id="inequalities" placeholder="例如：<= <= 表示两个 ≤ 约束"><= <=</textarea>
                <div class="small-text">支持: <= (小于等于), >= (大于等于), = (等于)</div>
            </div>

            <div style="display:flex;gap:12px;margin-top:16px">
                <button id="solve" class="btn-calc">求解</button>
                <button id="loadExample" class="btn-calc">载入示例</button>
            </div>
        </div>

        <div id="output"></div>
    </div>

    <script>
        window.MathJax = {
            tex: { inlineMath: [['$','$'], ['\\(','\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script>
        (function(){
            function tryRender(){
                try{
                    if (window.renderMathInElement) {
                        renderMathInElement(document.body, {
                            delimiters:[{left:'$$',right:'$$',display:true},{left:'\\[',right:'\\]',display:true},{left:'\\(',right:'\\)',display:false}],
                            throwOnError:false
                        });
                        return;
                    }
                } catch(e){ console.warn('KaTeX render failed', e); }
                if (window.MathJax && MathJax.typesetPromise) MathJax.typesetPromise();
            }
            if (document.readyState==='complete' || document.readyState==='interactive') tryRender(); else document.addEventListener('DOMContentLoaded', tryRender);
        })();
    </script>
    <script src="../assets/js/simplex.js"></script>
</body>
</html>
