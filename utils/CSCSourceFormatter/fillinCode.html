<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="64x64" href="facvion.png">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>源代码生成工具</title>
    <script src="assets/js/theme-init.js"></script>
</head>
<body>
    <!-- 日夜切换器 -->
    <div class="theme-toggle">
        <input type="checkbox" id="themeToggle" class="theme-toggle__checkbox">
        <label for="themeToggle" class="theme-toggle__btn">
            <span class="theme-toggle__feature"></span>
        </label>
    </div>

    <div id="background-wrapper"></div>
    <div class="container">
        <a href="index.html" class="back-btn">← 返回首页</a>
        <h1 data-shadow='源代码文档生成工具'>源代码文档生成工具</h1>

        <div class="section">
            <div class="form-group">
                <label>文档状态：</label>
                <div id="docStatusDisplay">正在加载文档...</div>
            </div>

            <div class="form-group">
                <label for="fileExtensions" class="required-field">文件后缀（多个文件用英文逗号分隔）：</label>
                <input type="text" id="fileExtensions" class="required" placeholder="例如：py,txt,cpp,java" required>
            </div>

            <div class="form-group">
                <label for="projectPath">选择代码项目文件夹：</label>
                <div class="fillinCode-file-input-wrapper">
                    <div class="fillinCode-file-input-trigger">点击选择项目文件夹</div>
                    <input type="file" id="projectPath" webkitdirectory directory onchange="updateFileName(this, 'projectPathName')">
                </div>
                <div id="projectPathName" class="fillinCode-file-name"></div>
            </div>

            <div class="form-group">
                <label for="codeLines">代码行数</label>
                <input type="text" id="codeLines" placeholder="例如：2500">
            </div>

            <div class="form-actions">
                <button class="btn" onclick="scanProject()">扫描项目</button>
                <button class="btn" onclick="getCode()">获取代码</button>
                <button class="btn" onclick="downloadDocument()">下载处理后文档</button>
            </div>

            <div id="fileTree"></div>

            <div id="fileContentDisplay">
                <a href="#" class="back-to-tree-link" onclick="backToFileTree(); return false;">← 返回目录树</a>
                <h2 id="displayFileName"></h2>
                <pre id="displayFileCode"></pre>
            </div>

            <div id="processingStatus">
                <h3>处理进度</h3>
                <div id="progressInfo"></div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <p>Copyright © 2024 Tooltopia. All Rights Reserved.</p>
                <p>Designed by DSTBP</p>
    </footer>

    <script src="assets/js/theme-toggle.js"></script>
    <script src="assets/js/fillin_code.js"></script>
    <script src="https://unpkg.com/docx@9.5.0/dist/index.umd.cjs"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.4/FileSaver.js"></script>
    
</body>
</html>
